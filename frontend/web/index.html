<!DOCTYPE html>
<html>
<head>
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="description" content="企微Copilot - 企业微信智能助手">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="企微Copilot">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>企微Copilot</title>
  <link rel="manifest" href="manifest.json">

  <!-- WeCom JS-SDK -->
  <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
  <!-- WeCom Work-specific bridge -->
  <script src="https://open.work.weixin.qq.com/wwopen/js/jwxwork-1.0.0.js"></script>

  <style>
    html, body { 
      height: 100%; 
      margin: 0; 
      overflow: auto; 
      background: #fff; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #flt-platform-view, canvas { 
      width: 100% !important; 
      height: 100% !important; 
    }
  </style>

  <script>
    // WeCom environment probe for debugging
    window.addEventListener('load', () => {
      try {
        console.log('WeCom环境探测 → typeof wx:', typeof wx);
        if (typeof wx !== 'undefined') {
          const keys = Object.keys(wx || {});
          console.log('WeCom环境探测 → wx keys:', keys);
          console.log('WeCom环境探测 → wx.config:', typeof wx.config);
          console.log('WeCom环境探测 → wx.agentConfig:', typeof wx.agentConfig);
        }
      } catch (e) {
        console.warn('WeCom环境探测错误:', e);
      }
    });
  </script>
</head>
<body>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
